vec myOldLoc;
vec myNewLoc = myOldLoc;
foreach neighbourLoc
{
  vec locDiff = myOldLoc-neighbourLoc;
  float locDist = length(locDiff);
  float separation = locDist - INTERACTION_RAD;
  if(separation < INTERACTION_RAD)
  {
    float k;
    if(separation > 0)
      k = ATTRACTION_FORCE;
    else
      k = -REPULSION_FORCE;
    myNewLoc += k * separation * locDiff / INTERACTION_RAD;
  }
}
myNewLoc = clamp(myNewLoc, envMin, envMax);